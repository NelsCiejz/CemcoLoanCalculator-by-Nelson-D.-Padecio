window.onload=function(){const n=new Date(),t=n.toLocaleString('en-US',{dateStyle:'long',timeStyle:'short'}),e=document.getElementById('dateTime');if(e)e.innerText="Date: "+t};function calculateLoan(){const a=parseFloat(document.getElementById('amount').value),t=parseInt(document.getElementById('terms').value),l=document.getElementById('loanType').value,m=document.getElementById('mode').value;if(!a||!t){alert("Punan muna ang Amount at Terms.");return}if(l==="Quick Loan"&&(a>10000||t>10)){alert("Error: Quick Loan limit is 10k/10mo.");return}if(l==="Emergency"&&(a>15000||t>15)){alert("Error: Emergency limit is 15k/15mo.");return}if(l==="Providential"&&(a>400000||t>36)){alert("Error: Providential limit is 400k/36mo.");return}let i=0;if(l==="Quick Loan"){i=(a*0.01)*t}else{let f=(1-Math.pow(1.01,-t))/(0.01*t);i=a*(1-f)}const s=a*0.02,p=a*0.01,n=a-i-s-p;let r=0;if(m==="Weekly"){r=(a/t)/4}else{r=(a/t)/2}const f=new Intl.NumberFormat('en-PH',{style:'currency',currency:'PHP'}),o=new Intl.NumberFormat('en-PH',{minimumFractionDigits:2});document.getElementById('resAmort').innerText=f.format(r);document.getElementById('resInterest').innerText=o.format(i);document.getElementById('resShare').innerText=o.format(s);document.getElementById('resProc').innerText=o.format(p);document.getElementById('resNet').innerText=f.format(n);document.getElementById('actionArea').style.display='flex'}function resetCalc(){document.getElementById('amount').value="";document.getElementById('terms').value="";document.getElementById('resAmort').innerText="₱ 0.00";document.getElementById('resInterest').innerText="0.00";document.getElementById('resShare').innerText="0.00";document.getElementById('resProc').innerText="0.00";document.getElementById('resNet').innerText="₱ 0.00";document.getElementById('actionArea').style.display='none'}function shareResult(){const a=document.getElementById('resAmort').innerText,n=document.getElementById('resNet').innerText,t=document.getElementById('loanType').value,e=`CEMCO Loan Computation (${t}):\nMonthly Amortization: ${a}\nNet Proceeds: ${n}\n\nComputed via Nelson's Calculator.`;if(navigator.share){navigator.share({title:'CEMCO Loan Result',text:e,url:window.location.href}).catch(o=>console.log("Error:",o))}else{alert("Hindi supported ang share feature. I-screenshot na lang po.")}}
